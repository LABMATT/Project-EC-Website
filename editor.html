<!DOCTYPE html>
<html>
    <head> 
        <title>Editor</title>
        <link rel="stylesheet" type="text/css" href="editorstyle.css">
    </head>

    <script src="socket.io/dist/socket.io.js"> ///socket.io/dist/socket.io.js </script> 
    <script>var socket = io("localhost:3000"); // hgc.labmatt.space:3000</script> 

<body scroll="no" onload="init()">

    <header>
    <nav>
    <ul>    
        <li><a class="active" href="user.html">Home</a></li>
        <li><a class="active" onclick="logout()">Logout</a></li>
        <li><a href="#ViewSelectedPage">View Selected Page</a></li>
        <li><a href="#ViewSite">View Site</a></li>
        <li><a href="#ForceSave">Force Save</a></li>
      </ul>

      
    <ul class="activeFiles">    
        <li style="padding-right: 15%;"><a class="active" href="#Explorer">Explorer</a></li>
        <li><a href="#ViewSelectedPage">index.html</a></li>
        <li><a href="#ViewSite">styles.css</a></li>
        <li><a href="#ForceSave">tom.png</a></li>
      </ul>
    </nav>
    </header>

    <section class="main">
      <!-- This is the tree view of your porject-->
     <div id="tree">
         Tree area
     </div>

     <!-- This is the line numbers-->
     <div class="lineNumber">
     <pre>
     <div>1</div>
     <div>2</div>
     <div>3</div>
     <div>4</div>
     <div>5</div>
     <div>6</div>
     <div>7</div>
     <div>8</div>
     <div>9</div>
     <div>10</div>
     <div>11</div>
     <div>12</div>

    </pre>
     </div>
      
     <!-- This is the editor window-->
     <div class="editor">
         <pre>
         <div><span>if(</span><span>1==1)</span><span> </span>{<span></span> </div>
         <div> </div>
         <div><span>}</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         <div><span>undefined</span></div>
         
         </pre>
     </div>

    </section>
  
</body>
</html>

<script>
//https://dev.to/lennythedev/css-gotcha-how-to-fill-page-with-a-div-270j
function init()
{
    var cid = document.cookie.substr((document.cookie.indexOf("echid=") + 6), document.cookie.length).split(';')[0];
    console.log(cid);
    socket.emit("rego", cid); // registers the new socketio id to the id we saved in the cookie.
    socket.emit("info", ["name", cid]); // Ask for our name.
}

     // IF login is invalid then send back to login page.
    socket.on('login', function(msg)
    {
        if(msg == "timeout")
        {
            window.location.href = "index.html";
        }
    });
    

// Logout the user.
function logout()
    {
        document.cookie = "echid=;"; 
        socket.emit("logout", "logout");
        location.href="index.html";
    }

function countLines()
{
    var lnum = document.getElementById("editbox").split("/n".length);
    console.log(lnum);
}
</script>